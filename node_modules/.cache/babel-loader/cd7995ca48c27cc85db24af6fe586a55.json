{"ast":null,"code":"\"use strict\";\n\nvar _createForOfIteratorHelper = require(\"C:/Users/MOHAM/Desktop/Team-Finder-Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createForOfIteratorHelper\");\n\nvar _classCallCheck = require(\"C:/Users/MOHAM/Desktop/Team-Finder-Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"C:/Users/MOHAM/Desktop/Team-Finder-Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _assertThisInitialized = require(\"C:/Users/MOHAM/Desktop/Team-Finder-Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/assertThisInitialized\");\n\nvar _get = require(\"C:/Users/MOHAM/Desktop/Team-Finder-Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/get\");\n\nvar _getPrototypeOf = require(\"C:/Users/MOHAM/Desktop/Team-Finder-Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"C:/Users/MOHAM/Desktop/Team-Finder-Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _createSuper = require(\"C:/Users/MOHAM/Desktop/Team-Finder-Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createSuper\");\n\nvar conversions = require(\"webidl-conversions\");\n\nvar idlUtils = require(\"../generated/utils.js\");\n\nvar ValidityState = require(\"../generated/ValidityState\");\n\nvar DefaultConstraintValidationImpl = require(\"../constraint-validation/DefaultConstraintValidation-impl\").implementation;\n\nvar _require = require(\"../../utils\"),\n    mixin = _require.mixin;\n\nvar HTMLElementImpl = require(\"./HTMLElement-impl\").implementation;\n\nvar NODE_TYPE = require(\"../node-type\");\n\nvar HTMLCollection = require(\"../generated/HTMLCollection\");\n\nvar HTMLOptionsCollection = require(\"../generated/HTMLOptionsCollection\");\n\nvar _require2 = require(\"../helpers/internal-constants\"),\n    domSymbolTree = _require2.domSymbolTree;\n\nvar _require3 = require(\"../helpers/form-controls\"),\n    getLabelsForLabelable = _require3.getLabelsForLabelable,\n    formOwner = _require3.formOwner,\n    isDisabled = _require3.isDisabled;\n\nvar _require4 = require(\"../helpers/strings\"),\n    parseNonNegativeInteger = _require4.parseNonNegativeInteger;\n\nvar HTMLSelectElementImpl = /*#__PURE__*/function (_HTMLElementImpl) {\n  _inherits(HTMLSelectElementImpl, _HTMLElementImpl);\n\n  var _super = _createSuper(HTMLSelectElementImpl);\n\n  function HTMLSelectElementImpl(globalObject, args, privateData) {\n    var _this;\n\n    _classCallCheck(this, HTMLSelectElementImpl);\n\n    _this = _super.call(this, globalObject, args, privateData);\n    _this._options = HTMLOptionsCollection.createImpl(_this._globalObject, [], {\n      element: _assertThisInitialized(_this),\n      query: function query() {\n        // Customized domSymbolTree.treeToArray() clone.\n        var array = [];\n\n        var _iterator = _createForOfIteratorHelper(domSymbolTree.childrenIterator(_assertThisInitialized(_this))),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var child = _step.value;\n\n            if (child._localName === \"option\") {\n              array.push(child);\n            } else if (child._localName === \"optgroup\") {\n              var _iterator2 = _createForOfIteratorHelper(domSymbolTree.childrenIterator(child)),\n                  _step2;\n\n              try {\n                for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                  var childOfGroup = _step2.value;\n\n                  if (childOfGroup._localName === \"option\") {\n                    array.push(childOfGroup);\n                  }\n                }\n              } catch (err) {\n                _iterator2.e(err);\n              } finally {\n                _iterator2.f();\n              }\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n\n        return array;\n      }\n    });\n    _this._selectedOptions = null; // lazy\n\n    _this._customValidityErrorMessage = \"\";\n    _this._labels = null;\n    return _this;\n  }\n\n  _createClass(HTMLSelectElementImpl, [{\n    key: \"_formReset\",\n    value: function _formReset() {\n      var _iterator3 = _createForOfIteratorHelper(this.options),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var option = _step3.value;\n          option._selectedness = option.hasAttributeNS(null, \"selected\");\n          option._dirtyness = false;\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n\n      this._askedForAReset();\n    }\n  }, {\n    key: \"_askedForAReset\",\n    value: function _askedForAReset() {\n      if (this.hasAttributeNS(null, \"multiple\")) {\n        return;\n      }\n\n      var selected = this.options.filter(function (opt) {\n        return opt._selectedness;\n      });\n      var size = this._displaySize;\n\n      if (size === 1 && !selected.length) {\n        // select the first option that is not disabled\n        var _iterator4 = _createForOfIteratorHelper(this.options),\n            _step4;\n\n        try {\n          for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n            var option = _step4.value;\n            var disabled = option.hasAttributeNS(null, \"disabled\");\n            var parentNode = domSymbolTree.parent(option);\n\n            if (parentNode && parentNode.nodeName.toUpperCase() === \"OPTGROUP\" && parentNode.hasAttributeNS(null, \"disabled\")) {\n              disabled = true;\n            }\n\n            if (!disabled) {\n              // (do not set dirty)\n              option._selectedness = true;\n              break;\n            }\n          }\n        } catch (err) {\n          _iterator4.e(err);\n        } finally {\n          _iterator4.f();\n        }\n      } else if (selected.length >= 2) {\n        // select the last selected option\n        selected.forEach(function (option, index) {\n          option._selectedness = index === selected.length - 1;\n        });\n      }\n    }\n  }, {\n    key: \"_descendantAdded\",\n    value: function _descendantAdded(parent, child) {\n      if (child.nodeType === NODE_TYPE.ELEMENT_NODE) {\n        this._askedForAReset();\n      }\n\n      _get(_getPrototypeOf(HTMLSelectElementImpl.prototype), \"_descendantAdded\", this).apply(this, arguments);\n    }\n  }, {\n    key: \"_descendantRemoved\",\n    value: function _descendantRemoved(parent, child) {\n      if (child.nodeType === NODE_TYPE.ELEMENT_NODE) {\n        this._askedForAReset();\n      }\n\n      _get(_getPrototypeOf(HTMLSelectElementImpl.prototype), \"_descendantRemoved\", this).apply(this, arguments);\n    }\n  }, {\n    key: \"_attrModified\",\n    value: function _attrModified(name) {\n      if (name === \"multiple\" || name === \"size\") {\n        this._askedForAReset();\n      }\n\n      _get(_getPrototypeOf(HTMLSelectElementImpl.prototype), \"_attrModified\", this).apply(this, arguments);\n    }\n  }, {\n    key: \"item\",\n    value: function item(index) {\n      return this.options.item(index);\n    }\n  }, {\n    key: \"namedItem\",\n    value: function namedItem(name) {\n      return this.options.namedItem(name);\n    }\n  }, {\n    key: idlUtils.indexedSetNew,\n    value: function value(index, _value) {\n      return this.options[idlUtils.indexedSetNew](index, _value);\n    }\n  }, {\n    key: idlUtils.indexedSetExisting,\n    value: function value(index, _value2) {\n      return this.options[idlUtils.indexedSetExisting](index, _value2);\n    }\n  }, {\n    key: \"add\",\n    value: function add(opt, before) {\n      this.options.add(opt, before);\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(index) {\n      if (arguments.length > 0) {\n        index = conversions.long(index, {\n          context: \"Failed to execute 'remove' on 'HTMLSelectElement': parameter 1\"\n        });\n        this.options.remove(index);\n      } else {\n        _get(_getPrototypeOf(HTMLSelectElementImpl.prototype), \"remove\", this).call(this);\n      }\n    }\n  }, {\n    key: \"_barredFromConstraintValidationSpecialization\",\n    value: function _barredFromConstraintValidationSpecialization() {\n      return this.hasAttributeNS(null, \"readonly\");\n    } // Constraint validation: If the element has its required attribute specified,\n    // and either none of the option elements in the select element's list of options\n    // have their selectedness set to true, or the only option element in the select\n    // element's list of options with its selectedness set to true is the placeholder\n    // label option, then the element is suffering from being missing.\n\n  }, {\n    key: \"_displaySize\",\n    get: function get() {\n      if (this.hasAttributeNS(null, \"size\")) {\n        var size = parseNonNegativeInteger(this.getAttributeNS(null, \"size\"));\n\n        if (size !== null) {\n          return size;\n        }\n      }\n\n      return this.hasAttributeNS(null, \"multiple\") ? 4 : 1;\n    }\n  }, {\n    key: \"_mutable\",\n    get: function get() {\n      return !isDisabled(this);\n    }\n  }, {\n    key: \"options\",\n    get: function get() {\n      return this._options;\n    }\n  }, {\n    key: \"selectedOptions\",\n    get: function get() {\n      var _this2 = this;\n\n      return HTMLCollection.createImpl(this._globalObject, [], {\n        element: this,\n        query: function query() {\n          return domSymbolTree.treeToArray(_this2, {\n            filter: function filter(node) {\n              return node._localName === \"option\" && node._selectedness === true;\n            }\n          });\n        }\n      });\n    }\n  }, {\n    key: \"selectedIndex\",\n    get: function get() {\n      for (var i = 0; i < this.options.length; i++) {\n        if (this.options.item(i)._selectedness) {\n          return i;\n        }\n      }\n\n      return -1;\n    },\n    set: function set(index) {\n      for (var i = 0; i < this.options.length; i++) {\n        this.options.item(i)._selectedness = false;\n      }\n\n      var selectedOption = this.options.item(index);\n\n      if (selectedOption) {\n        selectedOption._selectedness = true;\n        selectedOption._dirtyness = true;\n      }\n    }\n  }, {\n    key: \"labels\",\n    get: function get() {\n      return getLabelsForLabelable(this);\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      var _iterator5 = _createForOfIteratorHelper(this.options),\n          _step5;\n\n      try {\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          var option = _step5.value;\n\n          if (option._selectedness) {\n            return option.value;\n          }\n        }\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n\n      return \"\";\n    },\n    set: function set(val) {\n      var _iterator6 = _createForOfIteratorHelper(this.options),\n          _step6;\n\n      try {\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var option = _step6.value;\n\n          if (option.value === val) {\n            option._selectedness = true;\n            option._dirtyness = true;\n          } else {\n            option._selectedness = false;\n          }\n\n          option._modified();\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n    }\n  }, {\n    key: \"form\",\n    get: function get() {\n      return formOwner(this);\n    }\n  }, {\n    key: \"type\",\n    get: function get() {\n      return this.hasAttributeNS(null, \"multiple\") ? \"select-multiple\" : \"select-one\";\n    }\n  }, {\n    key: idlUtils.supportedPropertyIndices,\n    get: function get() {\n      return this.options[idlUtils.supportedPropertyIndices];\n    }\n  }, {\n    key: \"length\",\n    get: function get() {\n      return this.options.length;\n    },\n    set: function set(value) {\n      this.options.length = value;\n    }\n  }, {\n    key: \"validity\",\n    get: function get() {\n      var _this3 = this;\n\n      if (!this._validity) {\n        var state = {\n          valueMissing: function valueMissing() {\n            if (!_this3.hasAttributeNS(null, \"required\")) {\n              return false;\n            }\n\n            var selectedOptionIndex = _this3.selectedIndex;\n            return selectedOptionIndex < 0 || selectedOptionIndex === 0 && _this3._hasPlaceholderOption;\n          }\n        };\n        this._validity = ValidityState.createImpl(this._globalObject, [], {\n          element: this,\n          state: state\n        });\n      }\n\n      return this._validity;\n    } // If a select element has a required attribute specified, does not have a multiple attribute\n    // specified, and has a display size of 1; and if the value of the first option element in the\n    // select element's list of options (if any) is the empty string, and that option element's parent\n    // node is the select element(and not an optgroup element), then that option is the select\n    // element's placeholder label option.\n    // https://html.spec.whatwg.org/multipage/form-elements.html#placeholder-label-option\n\n  }, {\n    key: \"_hasPlaceholderOption\",\n    get: function get() {\n      return this.hasAttributeNS(null, \"required\") && !this.hasAttributeNS(null, \"multiple\") && this._displaySize === 1 && this.options.length > 0 && this.options.item(0).value === \"\" && this.options.item(0).parentNode._localName !== \"optgroup\";\n    }\n  }]);\n\n  return HTMLSelectElementImpl;\n}(HTMLElementImpl);\n\nmixin(HTMLSelectElementImpl.prototype, DefaultConstraintValidationImpl.prototype);\nmodule.exports = {\n  implementation: HTMLSelectElementImpl\n};","map":{"version":3,"sources":["C:/Users/MOHAM/Desktop/Team-Finder-Client/node_modules/jsdom/lib/jsdom/living/nodes/HTMLSelectElement-impl.js"],"names":["conversions","require","idlUtils","ValidityState","DefaultConstraintValidationImpl","implementation","mixin","HTMLElementImpl","NODE_TYPE","HTMLCollection","HTMLOptionsCollection","domSymbolTree","getLabelsForLabelable","formOwner","isDisabled","parseNonNegativeInteger","HTMLSelectElementImpl","globalObject","args","privateData","_options","createImpl","_globalObject","element","query","array","childrenIterator","child","_localName","push","childOfGroup","_selectedOptions","_customValidityErrorMessage","_labels","options","option","_selectedness","hasAttributeNS","_dirtyness","_askedForAReset","selected","filter","opt","size","_displaySize","length","disabled","parentNode","parent","nodeName","toUpperCase","forEach","index","nodeType","ELEMENT_NODE","apply","arguments","name","item","namedItem","indexedSetNew","value","indexedSetExisting","before","add","long","context","remove","getAttributeNS","treeToArray","node","i","selectedOption","val","_modified","supportedPropertyIndices","_validity","state","valueMissing","selectedOptionIndex","selectedIndex","_hasPlaceholderOption","prototype","module","exports"],"mappings":"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","sourcesContent":["\"use strict\";\n\nconst conversions = require(\"webidl-conversions\");\n\nconst idlUtils = require(\"../generated/utils.js\");\nconst ValidityState = require(\"../generated/ValidityState\");\nconst DefaultConstraintValidationImpl =\n  require(\"../constraint-validation/DefaultConstraintValidation-impl\").implementation;\nconst { mixin } = require(\"../../utils\");\nconst HTMLElementImpl = require(\"./HTMLElement-impl\").implementation;\nconst NODE_TYPE = require(\"../node-type\");\nconst HTMLCollection = require(\"../generated/HTMLCollection\");\nconst HTMLOptionsCollection = require(\"../generated/HTMLOptionsCollection\");\nconst { domSymbolTree } = require(\"../helpers/internal-constants\");\nconst { getLabelsForLabelable, formOwner, isDisabled } = require(\"../helpers/form-controls\");\nconst { parseNonNegativeInteger } = require(\"../helpers/strings\");\n\nclass HTMLSelectElementImpl extends HTMLElementImpl {\n  constructor(globalObject, args, privateData) {\n    super(globalObject, args, privateData);\n    this._options = HTMLOptionsCollection.createImpl(this._globalObject, [], {\n      element: this,\n      query: () => {\n        // Customized domSymbolTree.treeToArray() clone.\n        const array = [];\n        for (const child of domSymbolTree.childrenIterator(this)) {\n          if (child._localName === \"option\") {\n            array.push(child);\n          } else if (child._localName === \"optgroup\") {\n            for (const childOfGroup of domSymbolTree.childrenIterator(child)) {\n              if (childOfGroup._localName === \"option\") {\n                array.push(childOfGroup);\n              }\n            }\n          }\n        }\n        return array;\n      }\n    });\n    this._selectedOptions = null; // lazy\n\n    this._customValidityErrorMessage = \"\";\n\n    this._labels = null;\n  }\n\n  _formReset() {\n    for (const option of this.options) {\n      option._selectedness = option.hasAttributeNS(null, \"selected\");\n      option._dirtyness = false;\n    }\n    this._askedForAReset();\n  }\n\n  _askedForAReset() {\n    if (this.hasAttributeNS(null, \"multiple\")) {\n      return;\n    }\n\n    const selected = this.options.filter(opt => opt._selectedness);\n\n    const size = this._displaySize;\n    if (size === 1 && !selected.length) {\n      // select the first option that is not disabled\n      for (const option of this.options) {\n        let disabled = option.hasAttributeNS(null, \"disabled\");\n        const parentNode = domSymbolTree.parent(option);\n        if (parentNode &&\n          parentNode.nodeName.toUpperCase() === \"OPTGROUP\" &&\n          parentNode.hasAttributeNS(null, \"disabled\")) {\n          disabled = true;\n        }\n\n        if (!disabled) {\n          // (do not set dirty)\n          option._selectedness = true;\n          break;\n        }\n      }\n    } else if (selected.length >= 2) {\n      // select the last selected option\n      selected.forEach((option, index) => {\n        option._selectedness = index === selected.length - 1;\n      });\n    }\n  }\n\n  _descendantAdded(parent, child) {\n    if (child.nodeType === NODE_TYPE.ELEMENT_NODE) {\n      this._askedForAReset();\n    }\n\n    super._descendantAdded.apply(this, arguments);\n  }\n\n  _descendantRemoved(parent, child) {\n    if (child.nodeType === NODE_TYPE.ELEMENT_NODE) {\n      this._askedForAReset();\n    }\n\n    super._descendantRemoved.apply(this, arguments);\n  }\n\n  _attrModified(name) {\n    if (name === \"multiple\" || name === \"size\") {\n      this._askedForAReset();\n    }\n    super._attrModified.apply(this, arguments);\n  }\n\n  get _displaySize() {\n    if (this.hasAttributeNS(null, \"size\")) {\n      const size = parseNonNegativeInteger(this.getAttributeNS(null, \"size\"));\n      if (size !== null) {\n        return size;\n      }\n    }\n    return this.hasAttributeNS(null, \"multiple\") ? 4 : 1;\n  }\n\n  get _mutable() {\n    return !isDisabled(this);\n  }\n\n  get options() {\n    return this._options;\n  }\n\n  get selectedOptions() {\n    return HTMLCollection.createImpl(this._globalObject, [], {\n      element: this,\n      query: () => domSymbolTree.treeToArray(this, {\n        filter: node => node._localName === \"option\" && node._selectedness === true\n      })\n    });\n  }\n\n  get selectedIndex() {\n    for (let i = 0; i < this.options.length; i++) {\n      if (this.options.item(i)._selectedness) {\n        return i;\n      }\n    }\n    return -1;\n  }\n\n  set selectedIndex(index) {\n    for (let i = 0; i < this.options.length; i++) {\n      this.options.item(i)._selectedness = false;\n    }\n\n    const selectedOption = this.options.item(index);\n    if (selectedOption) {\n      selectedOption._selectedness = true;\n      selectedOption._dirtyness = true;\n    }\n  }\n\n  get labels() {\n    return getLabelsForLabelable(this);\n  }\n\n  get value() {\n    for (const option of this.options) {\n      if (option._selectedness) {\n        return option.value;\n      }\n    }\n\n    return \"\";\n  }\n\n  set value(val) {\n    for (const option of this.options) {\n      if (option.value === val) {\n        option._selectedness = true;\n        option._dirtyness = true;\n      } else {\n        option._selectedness = false;\n      }\n\n      option._modified();\n    }\n  }\n\n  get form() {\n    return formOwner(this);\n  }\n\n  get type() {\n    return this.hasAttributeNS(null, \"multiple\") ? \"select-multiple\" : \"select-one\";\n  }\n\n  get [idlUtils.supportedPropertyIndices]() {\n    return this.options[idlUtils.supportedPropertyIndices];\n  }\n\n  get length() {\n    return this.options.length;\n  }\n\n  set length(value) {\n    this.options.length = value;\n  }\n\n  item(index) {\n    return this.options.item(index);\n  }\n\n  namedItem(name) {\n    return this.options.namedItem(name);\n  }\n\n  [idlUtils.indexedSetNew](index, value) {\n    return this.options[idlUtils.indexedSetNew](index, value);\n  }\n\n  [idlUtils.indexedSetExisting](index, value) {\n    return this.options[idlUtils.indexedSetExisting](index, value);\n  }\n\n  add(opt, before) {\n    this.options.add(opt, before);\n  }\n\n  remove(index) {\n    if (arguments.length > 0) {\n      index = conversions.long(index, {\n        context: \"Failed to execute 'remove' on 'HTMLSelectElement': parameter 1\"\n      });\n      this.options.remove(index);\n    } else {\n      super.remove();\n    }\n  }\n\n  _barredFromConstraintValidationSpecialization() {\n    return this.hasAttributeNS(null, \"readonly\");\n  }\n\n  // Constraint validation: If the element has its required attribute specified,\n  // and either none of the option elements in the select element's list of options\n  // have their selectedness set to true, or the only option element in the select\n  // element's list of options with its selectedness set to true is the placeholder\n  // label option, then the element is suffering from being missing.\n  get validity() {\n    if (!this._validity) {\n      const state = {\n        valueMissing: () => {\n          if (!this.hasAttributeNS(null, \"required\")) {\n            return false;\n          }\n          const selectedOptionIndex = this.selectedIndex;\n          return selectedOptionIndex < 0 || (selectedOptionIndex === 0 && this._hasPlaceholderOption);\n        }\n      };\n\n      this._validity = ValidityState.createImpl(this._globalObject, [], {\n        element: this,\n        state\n      });\n    }\n    return this._validity;\n  }\n\n  // If a select element has a required attribute specified, does not have a multiple attribute\n  // specified, and has a display size of 1; and if the value of the first option element in the\n  // select element's list of options (if any) is the empty string, and that option element's parent\n  // node is the select element(and not an optgroup element), then that option is the select\n  // element's placeholder label option.\n  // https://html.spec.whatwg.org/multipage/form-elements.html#placeholder-label-option\n  get _hasPlaceholderOption() {\n    return this.hasAttributeNS(null, \"required\") && !this.hasAttributeNS(null, \"multiple\") &&\n      this._displaySize === 1 && this.options.length > 0 && this.options.item(0).value === \"\" &&\n      this.options.item(0).parentNode._localName !== \"optgroup\";\n  }\n}\n\nmixin(HTMLSelectElementImpl.prototype, DefaultConstraintValidationImpl.prototype);\n\nmodule.exports = {\n  implementation: HTMLSelectElementImpl\n};\n"]},"metadata":{},"sourceType":"script"}