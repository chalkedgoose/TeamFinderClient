{"ast":null,"code":"\"use strict\";\n\nvar _createForOfIteratorHelper = require(\"C:/Users/MOHAM/Desktop/Team-Finder-Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createForOfIteratorHelper\");\n\nvar _classCallCheck = require(\"C:/Users/MOHAM/Desktop/Team-Finder-Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"C:/Users/MOHAM/Desktop/Team-Finder-Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar webIDLConversions = require(\"webidl-conversions\");\n\nvar DOMException = require(\"domexception/webidl2js-wrapper\");\n\nvar NODE_TYPE = require(\"../node-type\");\n\nvar _require = require(\"../helpers/namespaces\"),\n    HTML_NS = _require.HTML_NS;\n\nvar _require2 = require(\"../helpers/create-element\"),\n    getHTMLElementInterface = _require2.getHTMLElementInterface;\n\nvar _require3 = require(\"../helpers/shadow-dom\"),\n    shadowIncludingInclusiveDescendantsIterator = _require3.shadowIncludingInclusiveDescendantsIterator;\n\nvar _require4 = require(\"../helpers/custom-elements\"),\n    isValidCustomElementName = _require4.isValidCustomElementName,\n    tryUpgradeElement = _require4.tryUpgradeElement,\n    enqueueCEUpgradeReaction = _require4.enqueueCEUpgradeReaction;\n\nvar idlUtils = require(\"../generated/utils\");\n\nvar HTMLUnknownElement = require(\"../generated/HTMLUnknownElement\");\n\nvar LIFECYCLE_CALLBACKS = [\"connectedCallback\", \"disconnectedCallback\", \"adoptedCallback\", \"attributeChangedCallback\"];\n\nfunction convertToSequenceDOMString(obj) {\n  if (!obj || !obj[Symbol.iterator]) {\n    throw new TypeError(\"Invalid Sequence\");\n  }\n\n  return Array.from(obj).map(webIDLConversions.DOMString);\n} // Returns true is the passed value is a valid constructor.\n// Borrowed from: https://stackoverflow.com/a/39336206/3832710\n\n\nfunction isConstructor(value) {\n  if (typeof value !== \"function\") {\n    return false;\n  }\n\n  try {\n    var P = new Proxy(value, {\n      construct: function construct() {\n        return {};\n      }\n    }); // eslint-disable-next-line no-new\n\n    new P();\n    return true;\n  } catch (_unused) {\n    return false;\n  }\n} // https://html.spec.whatwg.org/#customelementregistry\n\n\nvar CustomElementRegistryImpl = /*#__PURE__*/function () {\n  function CustomElementRegistryImpl(globalObject) {\n    _classCallCheck(this, CustomElementRegistryImpl);\n\n    this._customElementDefinitions = [];\n    this._elementDefinitionIsRunning = false;\n    this._whenDefinedPromiseMap = Object.create(null);\n    this._globalObject = globalObject;\n  } // https://html.spec.whatwg.org/#dom-customelementregistry-define\n\n\n  _createClass(CustomElementRegistryImpl, [{\n    key: \"define\",\n    value: function define(name, ctor, options) {\n      var _globalObject = this._globalObject;\n\n      if (!isConstructor(ctor)) {\n        throw new TypeError(\"Constructor argument is not a constructor.\");\n      }\n\n      if (!isValidCustomElementName(name)) {\n        throw DOMException.create(_globalObject, [\"Name argument is not a valid custom element name.\", \"SyntaxError\"]);\n      }\n\n      var nameAlreadyRegistered = this._customElementDefinitions.some(function (entry) {\n        return entry.name === name;\n      });\n\n      if (nameAlreadyRegistered) {\n        throw DOMException.create(_globalObject, [\"This name has already been registered in the registry.\", \"NotSupportedError\"]);\n      }\n\n      var ctorAlreadyRegistered = this._customElementDefinitions.some(function (entry) {\n        return entry.ctor === ctor;\n      });\n\n      if (ctorAlreadyRegistered) {\n        throw DOMException.create(_globalObject, [\"This constructor has already been registered in the registry.\", \"NotSupportedError\"]);\n      }\n\n      var localName = name;\n      var extendsOption = null;\n\n      if (options !== undefined && options.extends) {\n        extendsOption = options.extends;\n      }\n\n      if (extendsOption !== null) {\n        if (isValidCustomElementName(extendsOption)) {\n          throw DOMException.create(_globalObject, [\"Option extends value can't be a valid custom element name.\", \"NotSupportedError\"]);\n        }\n\n        var extendsInterface = getHTMLElementInterface(extendsOption);\n\n        if (extendsInterface === HTMLUnknownElement) {\n          throw DOMException.create(_globalObject, [\"\".concat(extendsOption, \" is an HTMLUnknownElement.\"), \"NotSupportedError\"]);\n        }\n\n        localName = extendsOption;\n      }\n\n      if (this._elementDefinitionIsRunning) {\n        throw DOMException.create(_globalObject, [\"Invalid nested custom element definition.\", \"NotSupportedError\"]);\n      }\n\n      this._elementDefinitionIsRunning = true;\n      var disableShadow = false;\n      var observedAttributes = [];\n      var lifecycleCallbacks = {\n        connectedCallback: null,\n        disconnectedCallback: null,\n        adoptedCallback: null,\n        attributeChangedCallback: null\n      };\n      var caughtError;\n\n      try {\n        var prototype = ctor.prototype;\n\n        if (typeof prototype !== \"object\") {\n          throw new TypeError(\"Invalid constructor prototype.\");\n        }\n\n        var _iterator = _createForOfIteratorHelper(LIFECYCLE_CALLBACKS),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var callbackName = _step.value;\n            var callbackValue = prototype[callbackName];\n\n            if (callbackValue !== undefined) {\n              lifecycleCallbacks[callbackName] = webIDLConversions.Function(callbackValue);\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n\n        if (lifecycleCallbacks.attributeChangedCallback !== null) {\n          var observedAttributesIterable = ctor.observedAttributes;\n\n          if (observedAttributesIterable !== undefined) {\n            observedAttributes = convertToSequenceDOMString(observedAttributesIterable);\n          }\n        }\n\n        var disabledFeatures = [];\n        var disabledFeaturesIterable = ctor.disabledFeatures;\n\n        if (disabledFeaturesIterable) {\n          disabledFeatures = convertToSequenceDOMString(disabledFeaturesIterable);\n        }\n\n        disableShadow = disabledFeatures.includes(\"shadow\");\n      } catch (err) {\n        caughtError = err;\n      } finally {\n        this._elementDefinitionIsRunning = false;\n      }\n\n      if (caughtError !== undefined) {\n        throw caughtError;\n      }\n\n      var definition = {\n        name: name,\n        localName: localName,\n        ctor: ctor,\n        observedAttributes: observedAttributes,\n        lifecycleCallbacks: lifecycleCallbacks,\n        disableShadow: disableShadow,\n        constructionStack: []\n      };\n\n      this._customElementDefinitions.push(definition);\n\n      var document = idlUtils.implForWrapper(this._globalObject._document);\n      var upgradeCandidates = [];\n\n      var _iterator2 = _createForOfIteratorHelper(shadowIncludingInclusiveDescendantsIterator(document)),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var candidate = _step2.value;\n\n          if (candidate._namespaceURI === HTML_NS && candidate._localName === localName && (extendsOption === null || candidate._isValue === name)) {\n            upgradeCandidates.push(candidate);\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      for (var _i = 0, _upgradeCandidates = upgradeCandidates; _i < _upgradeCandidates.length; _i++) {\n        var upgradeCandidate = _upgradeCandidates[_i];\n        enqueueCEUpgradeReaction(upgradeCandidate, definition);\n      }\n\n      if (this._whenDefinedPromiseMap[name] !== undefined) {\n        this._whenDefinedPromiseMap[name].resolve(undefined);\n\n        delete this._whenDefinedPromiseMap[name];\n      }\n    } // https://html.spec.whatwg.org/#dom-customelementregistry-get\n\n  }, {\n    key: \"get\",\n    value: function get(name) {\n      var definition = this._customElementDefinitions.find(function (entry) {\n        return entry.name === name;\n      });\n\n      return definition && definition.ctor;\n    } // https://html.spec.whatwg.org/#dom-customelementregistry-whendefined\n\n  }, {\n    key: \"whenDefined\",\n    value: function whenDefined(name) {\n      if (!isValidCustomElementName(name)) {\n        return Promise.reject(DOMException.create(this._globalObject, [\"Name argument is not a valid custom element name.\", \"SyntaxError\"]));\n      }\n\n      var alreadyRegistered = this._customElementDefinitions.some(function (entry) {\n        return entry.name === name;\n      });\n\n      if (alreadyRegistered) {\n        return Promise.resolve();\n      }\n\n      if (this._whenDefinedPromiseMap[name] === undefined) {\n        var resolve;\n        var promise = new Promise(function (r) {\n          resolve = r;\n        }); // Store the pending Promise along with the extracted resolve callback to actually resolve the returned Promise,\n        // once the custom element is registered.\n\n        this._whenDefinedPromiseMap[name] = {\n          promise: promise,\n          resolve: resolve\n        };\n      }\n\n      return this._whenDefinedPromiseMap[name].promise;\n    } // https://html.spec.whatwg.org/#dom-customelementregistry-upgrade\n\n  }, {\n    key: \"upgrade\",\n    value: function upgrade(root) {\n      var _iterator3 = _createForOfIteratorHelper(shadowIncludingInclusiveDescendantsIterator(root)),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var candidate = _step3.value;\n\n          if (candidate.nodeType === NODE_TYPE.ELEMENT_NODE) {\n            tryUpgradeElement(candidate);\n          }\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n  }]);\n\n  return CustomElementRegistryImpl;\n}();\n\nmodule.exports = {\n  implementation: CustomElementRegistryImpl\n};","map":{"version":3,"sources":["C:/Users/MOHAM/Desktop/Team-Finder-Client/node_modules/jsdom/lib/jsdom/living/custom-elements/CustomElementRegistry-impl.js"],"names":["webIDLConversions","require","DOMException","NODE_TYPE","HTML_NS","getHTMLElementInterface","shadowIncludingInclusiveDescendantsIterator","isValidCustomElementName","tryUpgradeElement","enqueueCEUpgradeReaction","idlUtils","HTMLUnknownElement","LIFECYCLE_CALLBACKS","convertToSequenceDOMString","obj","Symbol","iterator","TypeError","Array","from","map","DOMString","isConstructor","value","P","Proxy","construct","CustomElementRegistryImpl","globalObject","_customElementDefinitions","_elementDefinitionIsRunning","_whenDefinedPromiseMap","Object","create","_globalObject","name","ctor","options","nameAlreadyRegistered","some","entry","ctorAlreadyRegistered","localName","extendsOption","undefined","extends","extendsInterface","disableShadow","observedAttributes","lifecycleCallbacks","connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","caughtError","prototype","callbackName","callbackValue","Function","observedAttributesIterable","disabledFeatures","disabledFeaturesIterable","includes","err","definition","constructionStack","push","document","implForWrapper","_document","upgradeCandidates","candidate","_namespaceURI","_localName","_isValue","upgradeCandidate","resolve","find","Promise","reject","alreadyRegistered","promise","r","root","nodeType","ELEMENT_NODE","module","exports","implementation"],"mappings":"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","sourcesContent":["\"use strict\";\n\nconst webIDLConversions = require(\"webidl-conversions\");\nconst DOMException = require(\"domexception/webidl2js-wrapper\");\n\nconst NODE_TYPE = require(\"../node-type\");\n\nconst { HTML_NS } = require(\"../helpers/namespaces\");\nconst { getHTMLElementInterface } = require(\"../helpers/create-element\");\nconst { shadowIncludingInclusiveDescendantsIterator } = require(\"../helpers/shadow-dom\");\nconst { isValidCustomElementName, tryUpgradeElement, enqueueCEUpgradeReaction } = require(\"../helpers/custom-elements\");\n\nconst idlUtils = require(\"../generated/utils\");\nconst HTMLUnknownElement = require(\"../generated/HTMLUnknownElement\");\n\nconst LIFECYCLE_CALLBACKS = [\n  \"connectedCallback\",\n  \"disconnectedCallback\",\n  \"adoptedCallback\",\n  \"attributeChangedCallback\"\n];\n\nfunction convertToSequenceDOMString(obj) {\n  if (!obj || !obj[Symbol.iterator]) {\n    throw new TypeError(\"Invalid Sequence\");\n  }\n\n  return Array.from(obj).map(webIDLConversions.DOMString);\n}\n\n// Returns true is the passed value is a valid constructor.\n// Borrowed from: https://stackoverflow.com/a/39336206/3832710\nfunction isConstructor(value) {\n  if (typeof value !== \"function\") {\n    return false;\n  }\n\n  try {\n    const P = new Proxy(value, {\n      construct() {\n        return {};\n      }\n    });\n\n    // eslint-disable-next-line no-new\n    new P();\n\n    return true;\n  } catch {\n    return false;\n  }\n}\n\n// https://html.spec.whatwg.org/#customelementregistry\nclass CustomElementRegistryImpl {\n  constructor(globalObject) {\n    this._customElementDefinitions = [];\n    this._elementDefinitionIsRunning = false;\n    this._whenDefinedPromiseMap = Object.create(null);\n\n    this._globalObject = globalObject;\n  }\n\n  // https://html.spec.whatwg.org/#dom-customelementregistry-define\n  define(name, ctor, options) {\n    const { _globalObject } = this;\n\n    if (!isConstructor(ctor)) {\n      throw new TypeError(\"Constructor argument is not a constructor.\");\n    }\n\n    if (!isValidCustomElementName(name)) {\n      throw DOMException.create(_globalObject, [\"Name argument is not a valid custom element name.\", \"SyntaxError\"]);\n    }\n\n    const nameAlreadyRegistered = this._customElementDefinitions.some(entry => entry.name === name);\n    if (nameAlreadyRegistered) {\n      throw DOMException.create(_globalObject, [\n        \"This name has already been registered in the registry.\",\n        \"NotSupportedError\"\n      ]);\n    }\n\n    const ctorAlreadyRegistered = this._customElementDefinitions.some(entry => entry.ctor === ctor);\n    if (ctorAlreadyRegistered) {\n      throw DOMException.create(_globalObject, [\n        \"This constructor has already been registered in the registry.\",\n        \"NotSupportedError\"\n      ]);\n    }\n\n    let localName = name;\n\n    let extendsOption = null;\n    if (options !== undefined && options.extends) {\n      extendsOption = options.extends;\n    }\n\n    if (extendsOption !== null) {\n      if (isValidCustomElementName(extendsOption)) {\n        throw DOMException.create(_globalObject, [\n          \"Option extends value can't be a valid custom element name.\",\n          \"NotSupportedError\"\n        ]);\n      }\n\n      const extendsInterface = getHTMLElementInterface(extendsOption);\n      if (extendsInterface === HTMLUnknownElement) {\n        throw DOMException.create(_globalObject, [\n          `${extendsOption} is an HTMLUnknownElement.`,\n          \"NotSupportedError\"\n        ]);\n      }\n\n      localName = extendsOption;\n    }\n\n    if (this._elementDefinitionIsRunning) {\n      throw DOMException.create(_globalObject, [\n        \"Invalid nested custom element definition.\",\n        \"NotSupportedError\"\n      ]);\n    }\n\n    this._elementDefinitionIsRunning = true;\n\n    let disableShadow = false;\n    let observedAttributes = [];\n    const lifecycleCallbacks = {\n      connectedCallback: null,\n      disconnectedCallback: null,\n      adoptedCallback: null,\n      attributeChangedCallback: null\n    };\n\n    let caughtError;\n    try {\n      const { prototype } = ctor;\n\n      if (typeof prototype !== \"object\") {\n        throw new TypeError(\"Invalid constructor prototype.\");\n      }\n\n      for (const callbackName of LIFECYCLE_CALLBACKS) {\n        const callbackValue = prototype[callbackName];\n\n        if (callbackValue !== undefined) {\n          lifecycleCallbacks[callbackName] = webIDLConversions.Function(callbackValue);\n        }\n      }\n\n      if (lifecycleCallbacks.attributeChangedCallback !== null) {\n        const observedAttributesIterable = ctor.observedAttributes;\n\n        if (observedAttributesIterable !== undefined) {\n          observedAttributes = convertToSequenceDOMString(observedAttributesIterable);\n        }\n      }\n\n      let disabledFeatures = [];\n      const disabledFeaturesIterable = ctor.disabledFeatures;\n      if (disabledFeaturesIterable) {\n        disabledFeatures = convertToSequenceDOMString(disabledFeaturesIterable);\n      }\n\n      disableShadow = disabledFeatures.includes(\"shadow\");\n    } catch (err) {\n      caughtError = err;\n    } finally {\n      this._elementDefinitionIsRunning = false;\n    }\n\n    if (caughtError !== undefined) {\n      throw caughtError;\n    }\n\n    const definition = {\n      name,\n      localName,\n      ctor,\n      observedAttributes,\n      lifecycleCallbacks,\n      disableShadow,\n      constructionStack: []\n    };\n\n    this._customElementDefinitions.push(definition);\n\n    const document = idlUtils.implForWrapper(this._globalObject._document);\n\n    const upgradeCandidates = [];\n    for (const candidate of shadowIncludingInclusiveDescendantsIterator(document)) {\n      if (\n        (candidate._namespaceURI === HTML_NS && candidate._localName === localName) &&\n        (extendsOption === null || candidate._isValue === name)\n      ) {\n        upgradeCandidates.push(candidate);\n      }\n    }\n\n    for (const upgradeCandidate of upgradeCandidates) {\n      enqueueCEUpgradeReaction(upgradeCandidate, definition);\n    }\n\n    if (this._whenDefinedPromiseMap[name] !== undefined) {\n      this._whenDefinedPromiseMap[name].resolve(undefined);\n      delete this._whenDefinedPromiseMap[name];\n    }\n  }\n\n  // https://html.spec.whatwg.org/#dom-customelementregistry-get\n  get(name) {\n    const definition = this._customElementDefinitions.find(entry => entry.name === name);\n    return definition && definition.ctor;\n  }\n\n  // https://html.spec.whatwg.org/#dom-customelementregistry-whendefined\n  whenDefined(name) {\n    if (!isValidCustomElementName(name)) {\n      return Promise.reject(DOMException.create(\n        this._globalObject,\n        [\"Name argument is not a valid custom element name.\", \"SyntaxError\"]\n      ));\n    }\n\n    const alreadyRegistered = this._customElementDefinitions.some(entry => entry.name === name);\n    if (alreadyRegistered) {\n      return Promise.resolve();\n    }\n\n    if (this._whenDefinedPromiseMap[name] === undefined) {\n      let resolve;\n      const promise = new Promise(r => {\n        resolve = r;\n      });\n\n      // Store the pending Promise along with the extracted resolve callback to actually resolve the returned Promise,\n      // once the custom element is registered.\n      this._whenDefinedPromiseMap[name] = {\n        promise,\n        resolve\n      };\n    }\n\n    return this._whenDefinedPromiseMap[name].promise;\n  }\n\n  // https://html.spec.whatwg.org/#dom-customelementregistry-upgrade\n  upgrade(root) {\n    for (const candidate of shadowIncludingInclusiveDescendantsIterator(root)) {\n      if (candidate.nodeType === NODE_TYPE.ELEMENT_NODE) {\n        tryUpgradeElement(candidate);\n      }\n    }\n  }\n}\n\nmodule.exports = {\n  implementation: CustomElementRegistryImpl\n};\n"]},"metadata":{},"sourceType":"script"}