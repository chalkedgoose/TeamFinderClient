{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"C:/Users/MOHAM/Desktop/Team-Finder-Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"C:/Users/MOHAM/Desktop/Team-Finder-Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar idlUtils = require(\"../../living/generated/utils\");\n\nvar _require = require(\"../../living/helpers/events\"),\n    fireAnEvent = _require.fireAnEvent;\n\nmodule.exports = /*#__PURE__*/function () {\n  function PerDocumentResourceLoader(document) {\n    _classCallCheck(this, PerDocumentResourceLoader);\n\n    this._document = document;\n    this._defaultEncoding = document._encoding;\n    this._resourceLoader = document._defaultView ? document._defaultView._resourceLoader : null;\n    this._requestManager = document._requestManager;\n    this._queue = document._queue;\n    this._deferQueue = document._deferQueue;\n    this._asyncQueue = document._asyncQueue;\n  }\n\n  _createClass(PerDocumentResourceLoader, [{\n    key: \"fetch\",\n    value: function fetch(url, _ref) {\n      var _this = this;\n\n      var element = _ref.element,\n          onLoad = _ref.onLoad,\n          onError = _ref.onError;\n\n      var request = this._resourceLoader.fetch(url, {\n        cookieJar: this._document._cookieJar,\n        element: idlUtils.wrapperForImpl(element),\n        referrer: this._document.URL\n      });\n\n      if (request === null) {\n        return null;\n      }\n\n      this._requestManager.add(request);\n\n      var onErrorWrapped = function onErrorWrapped(error) {\n        _this._requestManager.remove(request);\n\n        if (onError) {\n          onError(error);\n        }\n\n        fireAnEvent(\"error\", element);\n        var err = new Error(\"Could not load \".concat(element.localName, \": \\\"\").concat(url, \"\\\"\"));\n        err.type = \"resource loading\";\n        err.detail = error;\n\n        _this._document._defaultView._virtualConsole.emit(\"jsdomError\", err);\n\n        return Promise.resolve();\n      };\n\n      var onLoadWrapped = function onLoadWrapped(data) {\n        _this._requestManager.remove(request);\n\n        _this._addCookies(url, request.response ? request.response.headers : {});\n\n        try {\n          var result = onLoad ? onLoad(data) : undefined;\n          return Promise.resolve(result).then(function () {\n            fireAnEvent(\"load\", element);\n            return Promise.resolve();\n          }).catch(function (err) {\n            return onErrorWrapped(err);\n          });\n        } catch (err) {\n          return onErrorWrapped(err);\n        }\n      };\n\n      if (element.localName === \"script\" && element.hasAttributeNS(null, \"async\")) {\n        this._asyncQueue.push(request, onLoadWrapped, onErrorWrapped, this._queue.getLastScript());\n      } else if (element.localName === \"script\" && element.hasAttributeNS(null, \"defer\")) {\n        this._deferQueue.push(request, onLoadWrapped, onErrorWrapped, false, element);\n      } else {\n        this._queue.push(request, onLoadWrapped, onErrorWrapped, false, element);\n      }\n\n      return request;\n    }\n  }, {\n    key: \"_addCookies\",\n    value: function _addCookies(url, headers) {\n      var _this2 = this;\n\n      var cookies = headers[\"set-cookie\"];\n\n      if (!cookies) {\n        return;\n      }\n\n      if (!Array.isArray(cookies)) {\n        cookies = [cookies];\n      }\n\n      cookies.forEach(function (cookie) {\n        _this2._document._cookieJar.setCookieSync(cookie, url, {\n          http: true,\n          ignoreError: true\n        });\n      });\n    }\n  }]);\n\n  return PerDocumentResourceLoader;\n}();","map":{"version":3,"sources":["C:/Users/MOHAM/Desktop/Team-Finder-Client/node_modules/jsdom/lib/jsdom/browser/resources/per-document-resource-loader.js"],"names":["idlUtils","require","fireAnEvent","module","exports","document","_document","_defaultEncoding","_encoding","_resourceLoader","_defaultView","_requestManager","_queue","_deferQueue","_asyncQueue","url","element","onLoad","onError","request","fetch","cookieJar","_cookieJar","wrapperForImpl","referrer","URL","add","onErrorWrapped","error","remove","err","Error","localName","type","detail","_virtualConsole","emit","Promise","resolve","onLoadWrapped","data","_addCookies","response","headers","result","undefined","then","catch","hasAttributeNS","push","getLastScript","cookies","Array","isArray","forEach","cookie","setCookieSync","http","ignoreError"],"mappings":"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","sourcesContent":["\"use strict\";\nconst idlUtils = require(\"../../living/generated/utils\");\nconst { fireAnEvent } = require(\"../../living/helpers/events\");\n\nmodule.exports = class PerDocumentResourceLoader {\n  constructor(document) {\n    this._document = document;\n    this._defaultEncoding = document._encoding;\n    this._resourceLoader = document._defaultView ? document._defaultView._resourceLoader : null;\n    this._requestManager = document._requestManager;\n    this._queue = document._queue;\n    this._deferQueue = document._deferQueue;\n    this._asyncQueue = document._asyncQueue;\n  }\n\n  fetch(url, { element, onLoad, onError }) {\n    const request = this._resourceLoader.fetch(url, {\n      cookieJar: this._document._cookieJar,\n      element: idlUtils.wrapperForImpl(element),\n      referrer: this._document.URL\n    });\n\n    if (request === null) {\n      return null;\n    }\n\n    this._requestManager.add(request);\n\n    const onErrorWrapped = error => {\n      this._requestManager.remove(request);\n\n      if (onError) {\n        onError(error);\n      }\n\n      fireAnEvent(\"error\", element);\n\n      const err = new Error(`Could not load ${element.localName}: \"${url}\"`);\n      err.type = \"resource loading\";\n      err.detail = error;\n\n      this._document._defaultView._virtualConsole.emit(\"jsdomError\", err);\n\n      return Promise.resolve();\n    };\n\n    const onLoadWrapped = data => {\n      this._requestManager.remove(request);\n\n      this._addCookies(url, request.response ? request.response.headers : {});\n\n      try {\n        const result = onLoad ? onLoad(data) : undefined;\n\n        return Promise.resolve(result)\n          .then(() => {\n            fireAnEvent(\"load\", element);\n\n            return Promise.resolve();\n          })\n          .catch(err => {\n            return onErrorWrapped(err);\n          });\n      } catch (err) {\n        return onErrorWrapped(err);\n      }\n    };\n\n    if (element.localName === \"script\" && element.hasAttributeNS(null, \"async\")) {\n      this._asyncQueue.push(request, onLoadWrapped, onErrorWrapped, this._queue.getLastScript());\n    } else if (element.localName === \"script\" && element.hasAttributeNS(null, \"defer\")) {\n      this._deferQueue.push(request, onLoadWrapped, onErrorWrapped, false, element);\n    } else {\n      this._queue.push(request, onLoadWrapped, onErrorWrapped, false, element);\n    }\n\n    return request;\n  }\n\n  _addCookies(url, headers) {\n    let cookies = headers[\"set-cookie\"];\n\n    if (!cookies) {\n      return;\n    }\n\n    if (!Array.isArray(cookies)) {\n      cookies = [cookies];\n    }\n\n    cookies.forEach(cookie => {\n      this._document._cookieJar.setCookieSync(cookie, url, { http: true, ignoreError: true });\n    });\n  }\n};\n"]},"metadata":{},"sourceType":"script"}